var HotelDiscount;(function(n){(function(n){function u(){_viewModel=new r(_Model),kendo.culture("ru-RU"),$(function(){return ko.applyBindings(_viewModel)})}var i=[{title:"RUR",sign:"р.",value:1,isPostfix:!0},{title:"USD",sign:"$",value:32.8606},{title:"EUR",sign:"€",value:43.9806},{title:"GBP",sign:"£",value:51.0654}],t=Enumerable.from(i).toObject(function(n){return n.title},function(n){return n}),r=function(){function n(n){var r=this;this.CityChoices=["Зальцбург"],this.ItemsPerPage=20,this.OrderOptions=["цене","звездам","названию"],this.Currencies=i.map(function(n){return n.title}),this.Currency=ko.observable(i[0].title),this.DetailsHotel=ko.observable(null),this.City=ko.observable(n.Input.City),this.DateFrom=ko.observable(new Date(Date.parse(n.Input.DateFrom))),this.DateTo=ko.observable(new Date(Date.parse(n.Input.DateTo))),this.Results=n.SearchResult,this.Results&&(this.Pages=Enumerable.toInfinity(0).takeWhile(function(n){return r.Results.Hotels.length>n*r.ItemsPerPage}).toArray(),this.Page=ko.observable(0),this.Order=ko.observable(this.OrderOptions[0]),this.Hotels=ko.computed(function(){return Enumerable.from(r.Results.Hotels).orderBy(function(n){return r.Order()==r.OrderOptions[1]?-n.Hotel.Stars:r.Order()==r.OrderOptions[2]?n.Hotel.Name:Enumerable.from(n.PlacementOptions).min(function(n){return n.Price*t[n.Currency].value})}).skip(r.Page()*r.ItemsPerPage).take(r.ItemsPerPage).toArray()}))}return n.prototype.GetPrice=function(i){var u=Enumerable.from(i.PlacementOptions).select(function(n){return n.Price*t[n.Currency].value}),r=n.ToPrice(u.min(),this.Currency()),f=n.ToPrice(u.max(),this.Currency());return r==f?r:"от "+r},n.prototype.GetPlacementPrice=function(i){return n.ToPrice(i.Price*t[i.Currency].value,this.Currency())},n.ToPrice=function(n,i){var r=t[i],u=(n/r.value).toFixed(0);return r.isPostfix?u+r.sign:r.sign+u},n}();n.Init=u})(n.Search||(n.Search={}));var t=n.Search})(HotelDiscount||(HotelDiscount={}))